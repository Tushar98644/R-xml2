<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Hard Test Analysis | R-xml2</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Hard Test Analysis" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This repository contains R scripts and R Markdown files for parsing and analyzing XML data using the xml2 package" />
<meta property="og:description" content="This repository contains R scripts and R Markdown files for parsing and analyzing XML data using the xml2 package" />
<link rel="canonical" href="http://localhost:4000/output/hard/README.html" />
<meta property="og:url" content="http://localhost:4000/output/hard/README.html" />
<meta property="og:site_name" content="R-xml2" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Hard Test Analysis" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"This repository contains R scripts and R Markdown files for parsing and analyzing XML data using the xml2 package","headline":"Hard Test Analysis","url":"http://localhost:4000/output/hard/README.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=de1ccd230537c48674fd2c0086d301a50abd476e">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <a id="skip-to-content" href="#content">Skip to the content.</a>

    <header class="page-header" role="banner">
      <h1 class="project-name">Hard Test Analysis</h1>
      <h2 class="project-tagline">This repository contains R scripts and R Markdown files for parsing and analyzing XML data using the xml2 package</h2>
      
        <a href="https://github.com/Tushar98644/R-xml2" class="btn">View on GitHub</a>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <h1 id="hard-test-analysis">Hard Test Analysis</h1>

<h2 id="introduction">Introduction</h2>

<p>The hard test pushes the <strong>boundaries</strong> of XML parsing with the xml2
package, focusing on the <strong>conversion</strong> of an XML document into a
<strong>structured R list</strong>. This test not only tests the package’s parsing
capabilities but also its ability to <strong>transform</strong> XML data into a
format that is easily manipulable within R. It involves creating a
<strong>custom</strong> <strong>function</strong> to recursively parse the XML document,
demonstrating the xml2 package’s flexibility and power in handling
complex XML structures. The code snippet in this section provides a
comprehensive example of how to leverage the xml2 package to parse XML
documents into R lists, showcasing the package’s robustness and
versatility in XML data manipulation.</p>

<h3 id="section-1-loading-libraries-and-xml-content"><u>Section 1: Loading Libraries and XML Content</u></h3>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">xml2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">stringr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">rlist</span><span class="p">)</span><span class="w">

</span><span class="n">z</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">'
&lt;CATALOG&gt;
 &lt;CD&gt;
    &lt;TITLE&gt;Empire Burlesque&lt;/TITLE&gt;
    &lt;ARTIST&gt;Bob Dylan&lt;/ARTIST&gt;
    &lt;COUNTRY&gt;USA&lt;/COUNTRY&gt;
    &lt;COMPANY&gt;Columbia&lt;/COMPANY&gt;
    &lt;PRICE&gt;10.90&lt;/PRICE&gt;
    &lt;YEAR&gt;1985&lt;/YEAR&gt;
 &lt;/CD&gt;
 &lt;CD&gt;
    &lt;TITLE&gt;Hide your heart&lt;/TITLE&gt;
    &lt;ARTIST&gt;Bonnie Tylor&lt;/ARTIST&gt;
    &lt;COUNTRY&gt;UK&lt;/COUNTRY&gt;
    &lt;COMPANY&gt;CBS Records&lt;/COMPANY&gt;
    &lt;PRICE&gt;9.90&lt;/PRICE&gt;
    &lt;YEAR&gt;1988&lt;/YEAR&gt;
 &lt;/CD&gt;
&lt;/CATALOG&gt;'</span><span class="w">
</span></code></pre></div></div>

<p><strong>Explanation</strong></p>

<ul>
  <li>
    <p>The <strong>xml2, stringr</strong>, and <strong>rlist</strong> libraries are loaded to handle
XML data and list manipulation in R.</p>
  </li>
  <li>
    <p>An XML content string representing a <strong>catalog</strong> of <strong>CDs</strong> is
defined, including details like title, artist, country, company,
price, and year.</p>
  </li>
</ul>

<h3 id="section-2-parsing-xml-to-list-using-rlist"><u>Section 2: Parsing XML to List Using rlist</u></h3>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">res</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rlist</span><span class="o">::</span><span class="n">list.parse</span><span class="p">(</span><span class="n">z</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s1">'xml'</span><span class="p">)</span><span class="w">
</span><span class="n">res</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## $CD
## $CD$TITLE
## [1] "Empire Burlesque"
## 
## $CD$ARTIST
## [1] "Bob Dylan"
## 
## $CD$COUNTRY
## [1] "USA"
## 
## $CD$COMPANY
## [1] "Columbia"
## 
## $CD$PRICE
## [1] "10.90"
## 
## $CD$YEAR
## [1] "1985"
## 
## 
## $CD
## $CD$TITLE
## [1] "Hide your heart"
## 
## $CD$ARTIST
## [1] "Bonnie Tylor"
## 
## $CD$COUNTRY
## [1] "UK"
## 
## $CD$COMPANY
## [1] "CBS Records"
## 
## $CD$PRICE
## [1] "9.90"
## 
## $CD$YEAR
## [1] "1988"
</code></pre></div></div>

<p><strong>Explanation</strong></p>

<ul>
  <li>
    <p>The <strong>list.parse</strong> function from the rlist package is used to parse
the XML string into an R list.</p>
  </li>
  <li>
    <p>The <strong>type=‘xml’</strong> argument specifies that the input is XML content.</p>
  </li>
  <li>
    <p>The <strong>parsed list</strong> is stored in the variable res.</p>
  </li>
</ul>

<h3 id="section-3-custom-function-to-parse-xml-to-list"><u>Section 3: Custom Function to Parse XML to List</u></h3>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">parse_xml_to_list</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">xml_string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
 </span><span class="n">xml_doc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_xml</span><span class="p">(</span><span class="n">xml_string</span><span class="p">)</span><span class="w">
  
 </span><span class="n">xml_to_list</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">node</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    
    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">xml_length</span><span class="p">(</span><span class="n">node</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nf">return</span><span class="p">(</span><span class="n">xml_text</span><span class="p">(</span><span class="n">node</span><span class="p">))</span><span class="w">
    </span><span class="p">}</span><span class="w"> 
    
    </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">children</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">xml_children</span><span class="p">(</span><span class="n">node</span><span class="p">)</span><span class="w">
      </span><span class="n">list_result</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lapply</span><span class="p">(</span><span class="n">children</span><span class="p">,</span><span class="w"> </span><span class="n">xml_to_list</span><span class="p">)</span><span class="w">
      </span><span class="nf">return</span><span class="p">(</span><span class="n">setNames</span><span class="p">(</span><span class="n">list_result</span><span class="p">,</span><span class="w"> </span><span class="n">xml_name</span><span class="p">(</span><span class="n">children</span><span class="p">)))</span><span class="w">
    </span><span class="p">}</span><span class="w">
 </span><span class="p">}</span><span class="w">
    
 </span><span class="n">result</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">xml_to_list</span><span class="p">(</span><span class="n">xml_doc</span><span class="p">)</span><span class="w">
  
 </span><span class="nf">return</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Explanation</strong></p>

<ul>
  <li>
    <p>A custom function <strong>parse_xml_to_list</strong> is defined to parse an XML
string into an R list.</p>
  </li>
  <li>
    <p>The function uses <strong>recursion</strong> to <strong>traverse</strong> the <strong>XML document</strong>.
If a node has no children, it returns the text content of the node.
Otherwise, it creates a list with the node’s name as the key and the
<strong>children’s list</strong> as the value.</p>
  </li>
  <li>
    <p>The <strong>xml_length</strong> function is used to check if a node has children.</p>
  </li>
  <li>
    <p>The <strong>xml_children</strong> function is used to get the children of a node.</p>
  </li>
  <li>
    <p>The <strong>xml_name</strong> function is used to get the name of a node.</p>
  </li>
  <li>
    <p>The <strong>xml_text</strong> function is used to get the text content of a node.</p>
  </li>
</ul>

<h3 id="section-4-using-the-custom-function"><u>Section 4: Using the Custom Function</u></h3>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">res2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">parse_xml_to_list</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="w">

</span><span class="n">print</span><span class="p">(</span><span class="n">res2</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## $CD
## $CD$TITLE
## [1] "Empire Burlesque"
## 
## $CD$ARTIST
## [1] "Bob Dylan"
## 
## $CD$COUNTRY
## [1] "USA"
## 
## $CD$COMPANY
## [1] "Columbia"
## 
## $CD$PRICE
## [1] "10.90"
## 
## $CD$YEAR
## [1] "1985"
## 
## 
## $CD
## $CD$TITLE
## [1] "Hide your heart"
## 
## $CD$ARTIST
## [1] "Bonnie Tylor"
## 
## $CD$COUNTRY
## [1] "UK"
## 
## $CD$COMPANY
## [1] "CBS Records"
## 
## $CD$PRICE
## [1] "9.90"
## 
## $CD$YEAR
## [1] "1988"
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">identical</span><span class="p">(</span><span class="n">res</span><span class="p">,</span><span class="w"> </span><span class="n">res2</span><span class="p">)</span><span class="w"> 
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] TRUE
</code></pre></div></div>

<p><strong>Explanation</strong></p>

<ul>
  <li>
    <p>The custom function <strong>parse_xml_to_list</strong> is used to parse the XML
string z into an R list, which is stored in res2.</p>
  </li>
  <li>
    <p>The <strong>print</strong> function is used to display the parsed list.</p>
  </li>
  <li>
    <p>The <strong>identical</strong> function checks if the list parsed by
<strong>rlist::list.parse</strong> is identical to the list parsed by the custom
function, demonstrating the equivalence of the two methods.</p>
  </li>
</ul>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/Tushar98644/R-xml2">R-xml2</a> is maintained by <a href="https://github.com/Tushar98644">Tushar98644</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>
  </body>
</html>
